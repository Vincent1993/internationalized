# æ ¼å¼åŒ–èƒ½åŠ›

`internationalized` åŸºäº `Intl.NumberFormat` å¹¶æ‰©å±•äº†æ’ä»¶æœºåˆ¶ï¼Œé€‚ç”¨äºå¤šç§ä¸šåŠ¡åœºæ™¯ã€‚

## ç»„ä»¶ä½¿ç”¨

> ğŸ“Œ ç‰ˆæœ¬è¯´æ˜ï¼š`NumberFormat` è‡ª **v0.0.1** èµ·æä¾›ã€‚

```tsx
import { NumberFormat } from 'internationalized';

<NumberFormat value={0.1234} style="percent" maximumFractionDigits={2} />;
```

- `style` æ”¯æŒ `decimal`ã€`currency`ã€`percent` ä»¥åŠæ‰©å±•æ’ä»¶æ ·å¼ï¼ˆå¦‚ `per-mille`ã€`per-myriad`ã€`percentage-point`ã€`cn-upper`ï¼‰ã€‚
- è‡ªåŠ¨æ ¹æ®æœ¬åœ°åŒ–è§„åˆ™è¾“å‡ºåƒåˆ†ä½ã€è´§å¸ç¬¦å·å’Œå•ä½ã€‚

## Hook

> ğŸ“Œ ç‰ˆæœ¬è¯´æ˜ï¼š`useFormat` è‡ª **v0.0.1** èµ·æä¾›ã€‚

```tsx
import { useFormat } from 'internationalized/hooks';

const { format } = useFormat({ style: 'currency', currency: 'CNY' });
format(123456.789); // => "ï¿¥123,456.79"
```

Hook åœ¨ React ä¸­å…±äº«ç¼“å­˜é…ç½®ï¼Œå‡å°‘é‡å¤åˆ›å»º `Intl.NumberFormat` çš„å¼€é”€ã€‚

## å‡½æ•°å¼ API

```ts
import { formatAsDecimal, formatAsCurrency } from 'internationalized/fp';

formatAsDecimal(1234.567, { maximumFractionDigits: 1 });
formatAsCurrency(88.6, 'EUR');
```

å‡½æ•°å¼å…¥å£ä¾¿äºåœ¨é React ç¯å¢ƒæˆ–æœåŠ¡ç«¯åœºæ™¯ä½¿ç”¨ã€‚

> ğŸ“Œ ç‰ˆæœ¬è¯´æ˜ï¼š`internationalized/fp` ä¸‹çš„æ‰€æœ‰å‡½æ•°è‡ª **v0.0.1** èµ·æä¾›ã€‚

## æ—¥æœŸæ ¼å¼åŒ–ç»„ä»¶

`@internationalized/date-format` åŒ…æä¾›ä¸æ•°å­—ç»„ä»¶åŒæ„çš„ APIï¼Œå†…éƒ¨åŸºäº `date-fns` å¤„ç†è¾“å…¥å¹¶å¤ç”¨ `Intl.DateTimeFormat`ã€‚

> ğŸ“Œ ç‰ˆæœ¬è¯´æ˜ï¼š`DateFormat`ã€`DateFormatProvider` ä¸ `useDateFormat` è‡ª **v0.0.1** èµ·æä¾›ã€‚

```tsx
import { DateFormat, DateFormatProvider, useDateFormat } from '@internationalized/date-format';

function NextMeeting() {
  const formatter = useDateFormat({
    dateStyle: 'medium',
    timeStyle: 'short',
    timeZone: 'Asia/Shanghai',
  });

  const meetingDate = new Date('2024-05-20T08:00:00Z');
  const { formattedValue } = formatter.format(meetingDate);

  return <output>{formattedValue}</output>;
}

export function App() {
  return (
    <DateFormatProvider options={{ locale: 'zh-CN', timeZone: 'Asia/Shanghai' }}>
      <section>
        <h2>ä¸‹ä¸€æ¬¡ä¼šè®®</h2>
        <DateFormat value={Date.now()} dateStyle="full" timeStyle="short" />
        <NextMeeting />
      </section>
    </DateFormatProvider>
  );
}
```

## åŠ¨æ€å°æ•°ä½æ§åˆ¶

é€šè¿‡ `extend_dynamicDecimals` æ‰©å±•é€‰é¡¹ï¼Œå¯ä»¥è‡ªåŠ¨ä¸ºæå°çš„å°æ•°å€¼æå‡ç²¾åº¦ï¼Œç›´åˆ°å‡ºç°é¦–ä¸ªéé›¶å°æ•°ï¼›è‹¥è¶…å‡ºé˜ˆå€¼ï¼Œåˆ™å›é€€åˆ°ç§‘å­¦è®¡æ•°æ³•ï¼š

```tsx
import { NumberFormat } from 'internationalized';

<NumberFormat
  value={0.00000031}
  style="decimal"
  extend_dynamicDecimals={{ maxFractionDigits: 8, additionalDigits: 1 }}
/>;
// => "0.00000031"
```

## æ’ä»¶æ‰©å±•

é€šè¿‡æ’ä»¶å¯ä»¥è½»æ¾æ‰©å±•æ–°çš„æ ¼å¼åŒ–æ¨¡å¼ï¼š

```ts
import { registerNumberFormatPlugin } from 'internationalized/core';

registerNumberFormatPlugin({
  name: 'compact-metric',
  resolve({ value }) {
    if (Math.abs(value) >= 10_000) {
      return { style: 'compact', notation: 'compact' };
    }
    return null;
  }
});
```

æ³¨å†Œåå³å¯åœ¨ç»„ä»¶ã€Hook ä¸å‡½æ•°å¼ API ä¸­å…±äº«ã€‚

## API é¦–æ¬¡æ”¯æŒç‰ˆæœ¬é€ŸæŸ¥

| API | é¦–æ¬¡æ”¯æŒç‰ˆæœ¬ |
| --- | --- |
| `NumberFormat` / `AutoMetricNumber` | v0.0.1 |
| `useFormat` / `useAutoFormat` / `useParse` | v0.0.1 |
| `createNumberFormat` / `resolveFormatOptions` | v0.0.1 |
| `createNumberParser` / `parseNumber` | v0.0.1 |
| `DateFormat` / `useDateFormat` / `DateFormatProvider` | v0.0.1 |

> ğŸ“š æƒ³è¦ä»¥é…ç½®å­—ç¬¦ä¸²ç®¡ç†æ ¼å¼åŒ–è§„åˆ™ï¼Ÿè¯·ç»§ç»­é˜…è¯»[æ¨¡æ¿å­—ç¬¦ä¸²](./templates.mdx) ç« èŠ‚ï¼Œäº†è§£å¦‚ä½•é€šè¿‡ `formatWithTemplate` ç»Ÿä¸€é©±åŠ¨ FP ä¸æ’ä»¶èƒ½åŠ›ã€‚
